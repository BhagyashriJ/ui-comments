angular.module("ui.comments",["ui.comments.tpls","ui.comments.directive"]),angular.module("ui.comments.tpls",["template/comments/comment.html","template/comments/comments.html"]),angular.module("ui.comments.directive",[]).provider("commentsConfig",function(){function a(a,b){"string"==typeof b&&(c[a]=b)}function b(a,b){c[a]=b&&(angular.isString(b)&&b.length||angular.isFunction(b)||angular.isArray(b))?b:d}var c={containerTemplate:"template/comments/comments.html",commentTemplate:"template/comments/comment.html",orderBy:"best",commentController:void 0},d=function(){},e={containerTemplate:a,commentTemplate:a,orderBy:a,commentController:b};this.$get=function(){return c},this.set=function(a,b){var c,d,f,g;if("string"==typeof a)c=e[a],c&&c(a,b);else if("object"==typeof a)for(f=Object.keys(a),g=0;g<f.length;++g)d=f[g],c=e[d],c&&c(d,a[d])}}).directive("comments",["$compile","commentsConfig",function(a,b){return{restrict:"EA",require:["?^comment"],transclude:!0,replace:!0,templateUrl:function(){return b.containerTemplate},scope:{comments:"=commentData"},controller:function(){},compile:function(){return function(a,c,d){d.$observe("orderBy",function(c){a.commentOrder=c||b.orderBy})}}}}]).directive("comment",["$compile","commentsConfig","$controller",function(a,b,c){return{require:["^comments","comment"],restrict:"EA",transclude:!0,replace:!0,templateUrl:function(){return b.commentTemplate},scope:{comment:"=commentData"},controller:["$scope",function(){}],compile:function(){return function(d,e,f,g){function h(b){if(angular.isArray(b)||(b=[]),b.length>0&&!n){l=a(o)(d);var c=d.$watch("$$phase",function(){c(),j.commentsTransclude?(m=j.commentsTransclude.clone(),j.commentsTransclude.replaceWith(l)):e.append(l),n=!0,e.triggerHandler("filled.comments",l)})}else!b.length&&n&&(n=!1,j.commentsTransclude&&m?j.commentsTransclude.replaceWith(m):l.remove(),l=m=void 0,e.triggerHandler("emptied.comments"))}var i,j=(g[0],g[1]),k=b.commentController;k&&(i=c(k,{$scope:d,$element:e}),i&&e.data("$CommentController",i)),"true"===e.parent().attr("child-comments")&&e.addClass("child-comment");var l,m,n=!1,o=angular.element('<comments child-comments="true" comment-data="comment.children"></comments>');d.$watch("comment",function(){h(d.comment.children)},!0)}}}}]).directive("commentsTransclude",function(){return{restrict:"EA",require:"^comment",link:{pre:function(a,b,c,d){d.commentsTransclude=b}}}}),angular.module("template/comments/comment.html",[]).run(["$templateCache",function(a){a.put("template/comments/comment.html",'<div class="comment">\n  <div class="comment-header">\n    <span class="comment-user">\n      <a class="comment-username" ng-if="comment.profileUrl" ng-href="{{comment.profileUrl}}" title="{{comment.name}}">{{comment.name}}</a>\n      <img class="comment-avatar" ng-if="comment.avatarUrl" ng-src="{{comment.avatarUrl}}" alt="{{comment.name}}" />\n      <span class="comment-username" ng-if="!comment.profileUrl">{{comment.name}}</span>\n      <span class="comment-date" ng-if="comment.date">{{comment.date}}</span>\n  </div>\n  <div class="comment-body" ng-bind="comment.text">\n      <child-comments comment-data="comment.children"></child-comments>\n  </div>\n</div>')}]),angular.module("template/comments/comments.html",[]).run(["$templateCache",function(a){a.put("template/comments/comments.html",'<div class="comments">\n  <comment ng-repeat="comment in comments" comment-data="comment"></comment>\n</div>\n')}]);